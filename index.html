<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MurderWare Chill Knives + Cubes</title>
<style>
  body, html {
    margin: 0; padding: 0;
    width: 100%; height: 100%;
    background: #000;
    overflow: hidden;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #eee;
    cursor: auto;
  }

  #fly-container {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    pointer-events: none;
    overflow: hidden;
    z-index: 0;
  }

  .cube {
    position: absolute;
    width: 30px; height: 30px;
    background: crimson;
    opacity: 0.7;
    border-radius: 4px;
    box-shadow: 0 0 10px crimson;
    will-change: transform;
  }

  .knife {
    position: absolute;
    width: 70px;
    height: 70px;
    opacity: 0.9;
    filter: drop-shadow(0 0 5px red);
    will-change: transform;
  }

  .knife img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    pointer-events: none;
    user-select: none;
  }

  h1 {
    position: relative;
    text-align: center;
    margin-top: 20px;
    z-index: 10;
    font-size: 3em;
    text-shadow: 0 0 10px crimson;
  }
</style>
</head>
<body>

<h1>MurderWare Vibe</h1>
<div id="fly-container"></div>

<script>
  const container = document.getElementById('fly-container');
  const totalCubes = 15;

  const knifeImgs = [
    'https://cdn.nookazon.com/mm2/items/4534866678.png',
    'https://cdn.nookazon.com/mm2/items/11255504462.png',
    'https://cdn.nookazon.com/mm2/items/295269977.png',
    'https://vignette.wikia.nocookie.net/murder-mystery-2/images/a/a5/Ck.png/revision/latest?cb=20191122131526',
    'https://cdn.nookazon.com/mm2/items/332022166.png'
  ];

  let mouseX = window.innerWidth / 2;
  let mouseY = window.innerHeight / 2;

  document.addEventListener('mousemove', (e) => {
    mouseX = e.clientX;
    mouseY = e.clientY;
  });

  // Класс кубика для chill фона
  class Cube {
    constructor() {
      this.el = document.createElement('div');
      this.el.classList.add('cube');
      container.appendChild(this.el);

      this.x = Math.random() * window.innerWidth;
      this.y = Math.random() * window.innerHeight;
      this.speedX = (Math.random() - 0.5) * 1.5;
      this.speedY = (Math.random() - 0.5) * 1.5;
    }

    update() {
      this.x += this.speedX;
      this.y += this.speedY;

      if (this.x < -30) this.x = window.innerWidth;
      else if (this.x > window.innerWidth) this.x = -30;

      if (this.y < -30) this.y = window.innerHeight;
      else if (this.y > window.innerHeight) this.y = -30;

      this.el.style.transform = `translate(${this.x}px, ${this.y}px)`;
    }
  }

  // Класс ножа, который летит в курсор
  class Knife {
    constructor() {
      this.el = document.createElement('div');
      this.el.classList.add('knife');
      const img = document.createElement('img');
      img.src = knifeImgs[Math.floor(Math.random() * knifeImgs.length)];
      this.el.appendChild(img);
      container.appendChild(this.el);

      this.x = Math.random() * window.innerWidth;
      this.y = Math.random() * window.innerHeight;
      this.rotation = Math.random() * 360;
      this.rotSpeed = (Math.random() - 0.5) * 4;
    }

    update() {
      const dx = mouseX - this.x;
      const dy = mouseY - this.y;
      const dist = Math.sqrt(dx*dx + dy*dy);

      if (dist < 30) {
        // Исчезаем и появляется новый нож с рандомной позицией
        container.removeChild(this.el);
        return false;
      }

      const speed = Math.min(dist / 10, 6);
      const vx = (dx / dist) * speed;
      const vy = (dy / dist) * speed;

      this.x += vx;
      this.y += vy;
      this.rotation += this.rotSpeed;
      this.el.style.transform = `translate(${this.x}px, ${this.y}px) rotate(${this.rotation}deg)`;

      return true;
    }
  }

  // Создаём кубики
  const cubes = [];
  for(let i = 0; i < totalCubes; i++) {
    cubes.push(new Cube());
  }

  // Создаём один нож
  let knife = new Knife();

  function animate() {
    cubes.forEach(cube => cube.update());

    if (!knife.update()) {
      // если нож пропал, создаём новый
      knife = new Knife();
    }

    requestAnimationFrame(animate);
  }

  animate();
</script>

</body>
</html>
